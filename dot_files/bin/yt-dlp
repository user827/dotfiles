#!/bin/sh
set -eu

if [ -n "${is_sleep_inhibited:-}" ]; then
  exec /usr/bin/yt-dlp ${YT_DLP_ARGS:-} "$@"
fi
if [ "${DESKTOP_SESSION:-}" = gnome ]; then
  export is_sleep_inhibited=1
  exec gnome-session-inhibit --app-id yt-dlp --reason dling --inhibit suspend yt-dlp "$@"
fi
exec /usr/bin/yt-dlp "$@"
